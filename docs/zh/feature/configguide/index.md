# 个性化配置指南

FirPE 支持通过放置自定义目录中的资源与编辑 `config.ini` 实现系统行为、外观、工具等多方面的个性化设置，帮助用户根据自身需求定制 WinPE 环境。以下指南将介绍各功能模块的配置方法。

> [!NOTE]
>
> - 使用 FirPE 写入器制作 U 盘启动盘时，会自动将完整的 `FirPE` 目录复制到 U 盘根目录，无需手动拷贝。
> - 当使用写入器生成 ISO 镜像时，会额外生成一个名为 **“个性化目录接口.exe”** 的可执行文件，内含完整的 `FirPE` 目录结构。
>   1.  双击运行 `个性化目录接口.exe`。
>   2.  选择目标 U 盘路径（如 `E:\`），确认后会将内置的 `FirPE` 目录和文件一并复制到该 U 盘。
> - Ventoy 用户将 ISO 镜像文件生成至 U 盘，会自动将完整的 `FirPE` 目录复制到 U 盘根目录，无需手动拷贝。

> [!NOTE]
>
> 下列配置项为常用示例，`config.ini` 中包含更多可选项，详情请参考文件头部注释或原始 `config.ini` 完整内容。

## 壁纸定制

> [!NOTE]
>
> 注意后缀名为`.jpg`不是`.jpg.jpg`

- **浅色模式壁纸**：将 JPG 格式图片命名为 `wp.jpg`，放在 `U盘:\FirPE` 目录下。
- **暗色模式壁纸**：将深色主题壁纸命名为 `dark.jpg`，放在同一目录。

![](./assets/wallpaper.svg)

## 系统基础设置

**功能**：登录安全、设备标识、音量与亮度、电源计划、小键盘状态等。

|    配置项    |                  取值 / 说明                   |
| :----------: | :--------------------------------------------: |
|   登录密码   |            任意字符串，留空则无密码            |
|  计算机名称  |                   任意字符串                   |
|   默认音量   |                     0–100                      |
|   默认亮度   |                     0–100                      |
|   电源计划   |              节能 / 平衡 / 高性能              |
|  开启小键盘  |                0（关）/1（开）                 |
| 保留数据目录 | 0（关闭）/1（开启，重定向桌面、文档等至 U 盘） |

```ini
[系统]
登录密码=admin123
计算机名称=MyPE
默认音量=75
默认亮度=60
电源计划=平衡
开启小键盘=1
```

### 自动理顺盘符

自动理顺盘符以保持盘符顺序。

```ini
[应用程序]
自动理顺盘符=1
```

## 外观与桌面布局

**功能**：显示分辨率、图标和任务栏大小、夜间模式、桌面文件布局。

|      配置项      |     取值 / 说明      |
| :--------------: | :------------------: |
|      分辨率      | 宽 高（如 1024 768） |
|   桌面图标大小   |     小 / 中 / 大     |
|    任务栏大小    |     小 / 中 / 大     |
| 自动切换夜间模式 |        0 / 1         |
| 自动切换夜间模式 |        0 / 1         |

```ini
[外观和个性化]
分辨率=1280 800
桌面图标大小=中
任务栏大小=小
自动切换夜间模式=1
```

### 自定义桌面文件

在 `U盘:\FirPE\Desktop` 文件夹内放置 `可执行文件(.exe)`、`快捷方式(.lnk)`，WinPE 启动后自动将其显示在桌面上。

## 网络设置

**功能**：静态 IP、DNS、Wi‑Fi 自动连接、SMB 文件共享自动挂载。

|       配置项       |                 取值 / 说明                 |
| :----------------: | :-----------------------------------------: |
|         IP         |              如 192.168.1.100               |
|        DNS         |                 如 8.8.8.8                  |
| 自动连接已保存网络 |                    0 / 1                    |
| 自动文件共享 1 … 5 | IP 用户名 密码（如 192.168.1.1 admin 1234） |

```ini
[网络和Internet]
IP=192.168.1.200
DNS=114.114.114.114
自动连接已保存网络=1
自动文件共享1=192.168.1.10 administrator Pass@123
```

## 驱动加载

### 加载自定义驱动

**功能**：自动加载驱动包，使得硬件正常使用。

将驱动包（支持格式：`.wim`、`.7z`、`.zip`、`.rar`、`.cab`）放入 `U盘:\FirPE\Drivers`，WinPE 启动时自动扫描并加载。

### 加载本地驱动

**功能**：自动加载本地硬盘上的驱动，确保网络和硬件环境即插即用。

|        配置项        | 取值 / 说明 |
| :------------------: | :---------: |
| 自动加载本地网卡驱动 |    0 / 1    |
|   自动加载本地驱动   |    0 / 1    |

```ini
[应用程序]
自动加载本地网卡驱动=1
自动加载本地驱动=1
```

## 工具与自动运行

### 自定义工具

**功能**：集成常用绿色软件，无需编写配置文件，自动识别主程序并创建桌面快捷方式、开始菜单快捷方式；

> [!NOTE]
> 目前支持以下形式的软件
>
> - 单文件程序（`.exe`）
> - 绿色软件（文件夹）
> - 打包后的绿色软件（支持格式： `7z`、`zip`、`rar`、`wim`）

将绿色软件或压缩包放入 `U盘:\FirPE\Tools`，WinPE 会自动在桌面和开始菜单生成对应快捷方式。

### 自动运行程序

**功能**：设置 WinPE 启动后自动运行的程序。

将希望在进入桌面后立即运行的程序放入 `U盘:\FirPE\Startup`，WinPE 启动后会自动执行。

## 文件补充与替换

**功能**：在启动时将自定义文件拷贝或覆盖到系统目录，实现预装工具或替换默认文件。

|             目录             |              作用               |
| :--------------------------: | :-----------------------------: |
|       `\FirPE\Windows`       |     覆盖复制到 `X:\Windows`     |
|    `\FirPE\Program Files`    |    复制到 `X:\Program Files`    |
| `\FirPE\Program Files (x86)` | 复制到 `X:\Program Files (x86)` |
